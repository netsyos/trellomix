language: go
go:
- 1.x
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: yDRpmTa97Ab1kr6KwcN4AopKaiNkRON/BmySsWv6zzAZNbH8MVZ1rHMStR3vbh3bOnTGvj6fbx4iV2W8KmZioI7WGx0tndbtQi84CztqZ8VMUUgXxeG/j6EE+bMUfcU5C3MhS11jyjSbogTE6QXQ2ylsOBshCAJoojTMVDwfmX0NfB579ES4Zg3/koYLoPZJyEjvDgoIq4dMJsv+yZ2KEd/I6NqOAiW7LuzDvTNEWL8fYNqbsgFyJIeacS1IUn9u1FQR4CeaJoZ+6icrqMnBGaCmwvqTa2mALywKHbfdGLvIdONF3Lad9Y01PAcuZsjXZv5ZFiXTNbwWmQG+ai89k8WYqqXslQULzmzmCZQLnrNMjASSnM1l/59W4u3XwIcRSdnllX+W7VGcWit7vHuyfFvDgVgtbjFL1l1cC3aXNk9ZcMzDQvi63zydP+1isSE8x9uuIALpPKMtv8ctnDqxQSQyEXAuxwgRn2n3+pzjG5mI+Oir5IigsQj8Cg3DWNYFfI+7wvXaYMXHQ3UGz8Y36QFakK+Ie3+pl5apO1dkW4tBVnEGfpjvYGXT22ebrd+D/hXr3M0lYDPVtpkvjillLnmBLl59sDLC9dUQr7SI1M+vl1CnyKgVVbrH6iYYs2AEcw6fwh4WuX/7QXtMlNYd74QqUG6x4OekU6/MWwnPqbA=
  - secure: kjc/hvUW6PILAOkkboxqAUwQMu0DplI9TcIDdPyBzQe0Ys0gSBVjeTpzOZ7PwVM6aPKShKL+PC0J16NjpHHYui2j28ZSYZdGt/ysJaOe7V2p5XZncnK6c8K0hwlDDCTSC0NS0GS7163XOxzqdraMm3FB1NsitTEvZ150iL5gE8XA4cjKzx+zn7JJ0yFm6TAMQtaNd3DYQ/FZhBsOFkYHUtOQqhJ323o2WLKVM0x1zS+4QbSHcCRZf29Y30g4QjYcluq0eDwxqmdWvxamtrOkrUjMT5ePC2UG0bJKTogz7Erh4h8WRs9u5MZRsjdxe2Ps0/IvtU6e4WDXdWxdV3rVGCO7CPgkCB2uNfMgzJe/ZcMt17YocxYD0zvqd18RziMz+ZiFL/LGNzDmsJ79DrRkBPCyeNgu4ned6YC/+q+NLedoZB1D4OG1QryJz6sSCMwVZucE5VXVVMQTS6vlIkgub/Ktq1scmabsRZdLhFRICNSJZDXBn/ITTmXcyhXNcIvyg2AmzZf79mPE8W4w1RwbPa0R7jWKqzUBalg33RKzYpDAqTqEiNq8OYcjcZM3EhwoE5MS9fN1I2l69eWOcmFZXZLKNN7F5J46gpiQdz7CFmlv+iOS5F3/70p8GPNNUFeghjd1Xx+zPaeMG12MAeJY2ZGMbSPHF/OXPx3h81NcD60=
  - secure: xM7UYVjssvUDcBgqYROf3B2MwEX7nKUzb86nCIkNyC5pf+JKj6un5gvFb4YHYpAA0hoz3oIyApnuLxPt6LqgBiyXOqZAxaaW+cHQH6hYvkiFeR2rmrFkG6Rg3tX82BHclMthcgbtR7dQWXOSc4GfCSVwb5XOgVjsc77fHUQ/AybDqMuc8tNqnTQxZ7dx4z3vg0e51gdkO6c+Y5eCY+4XiDhvb6nSOhPMK5bSk+MsfvzwijbvWs4vseqyeXtXfKXQcb06zXJuhXGQEMTeKCSMmY53Q527SRJA06C1c5rmOjHsf77KTl+k4PAu+dKuIVGJkvSzZhijGQS5lti84lEObi2/3S60GgCg6zFJVR3se5Ibzn1JpDoOoiEHMEyvyqnG1mGClfet772yQF4VZIvjDuf8leckyOurWN88qOeTX5AvNcQhW5KhY9iW23VU8sSLrbwsKvxpI4W6f8gqLlCLEGTEsdITOqlfJn9rXwb+9mynzpx/tt+YzNd6GGDwN5rWK4qCNbeeVIBWAxuZCk7JlUbOqtyya+2VGNOtGsDBSBuqQqUgF9T792mhNo0pi/9507buT1JWHNd3jSqAIGSxAjd0deUKrOc4cjCROCTOzx2iYu2Up/uCxP/PL7iF72CD2UBjyfTRC/6slXCEQEWaQ40cCJa1U4si7PBnrDAC0XU=
script:
- ls -alh
- docker login -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/trellomix
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
notifications:
  slack:
    secure: VpqXNQcWsHQQS6xncb2uzykr2NKVr21vGQMT/GS4wVITp3ZRehp9l47bHboyW+zA+BoNRnIZs6isozbZg4BuPs6bxaoHy0GcYiucOTZWRAT/UgVds9hby/c9pOLkYoRvGpdaSAl/rg+T3X6xWlokQyA45nMkBzZQA1/Km3EfoCsbMf5o3bsaQf9QliU8hFFS/4P+Qtf0FD5nw0RS3+S0s2dlNqdv3tBTx9gsBepBaNuTRYIRF6bko2SWAfhpOR+/50rWi/e4xclnWFXBPEn5ojpLGpuUEcYzXiWKIREKGkJaQvKzreLvpcEC7JeS1X9KMa/8jTIcfZatkKjQfXA+0Rk0Oa5HMHpNFtTZxOYt97+2sfg4zljt5YllsFJaLRdrgYiNXTBaiTLHYVmtqeQd+eL4AWk2X+xTMyGoofcbtY6l2j3ecgUzXcyTnAesl6b7j564M5rFVr+HyH0KkBk5CttK16qcBivieyLrr0T2gbsiMk1xMwvGVpbg1i+Shwph3rNw+j37x8JKQbPg0tFHlarxdu6gsA1tY2XAaKSSz2zqIeeLBDRGHfWSzf7kJWd42JByFrwi0WVfd5PN5uYYRk4T3b255ZZYH9Ku5Hd4uDn1jOKJsu60ujKSntl1i09TOVaQtw5TqDQ6Q0qW+eNyEGVm13k8tssXaO07BoezUHU=
